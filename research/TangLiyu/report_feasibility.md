# MacOS的安全性

- MacOS下的软件：
  - app store上的软件
    - 工作机制
      - 所有发布在Mac App Store下的软件必须沙盒化
      - 但用户可以主动的提供更多权限
    - 软件在App Store发布前经过苹果评估
      - 评估过程源代码不可见
      - 历史上有恶意软件可以通过评估得到发布
    - app store的额外要求
      - 对开发者收取费用
      - 对付费软件收取30%利益
      - 限制一些功能，强制一些功能
      - 不允许GPL许可证的软件发布
  - 不在app store上的软件
    - 很多软件本身无法在App Store 的沙盒框架下运行
    - 很多开发者也不希望在App Store上发布软件
    - 不受沙盒控制
  
- MacOS的沙盒
  - 苹果没有提供技术文档,也没有开源。因此无法得知技术细节，只能提供大致的行为描述
  - 预先配置型的沙盒（vs 通用沙盒）
    - 软件沙盒化
      - 软件开发者(在苹果提供的交互界面下)对软件所需要的功能进行描述(配置沙盒)
    - 沙盒初始化
      - 所有软件初次运行前,都相当于未沙盒的
      - 初次运行时,MacOS检查软件是否启用了沙盒
        - 若启用,则MacOS对其进行沙盒化。
        - 过程中将生成一个沙盒配置文件,其中描述了该软件的权限
    - 沙盒内软件的运行
      - 在运行过程中发出服务请求时,内核中的沙盒模块将会实时地将此请求与先前的配置文件对比
        - 若符合,则可以得到资源的使用权
        - 若不符合,则返回错误代码
    - 发现的漏洞
      - 在沙盒初始化时绕过沙盒
      - 则所有安全机制都失效
  

# IOS的安全性

- iOS 是一个从一开始就彻底应用沙盒机制的系统，正常情况下，所有 iOS 设备都只能安装 App Store 中的应用程序，而所有这些应用程序都彻底采用了沙盒机制，不能访问除自己目录之外的资源
- 但他们的应用程序无法调用其它程序配合完成任务，导致必须重复实现各种已有的功能(如pdf阅读功能)